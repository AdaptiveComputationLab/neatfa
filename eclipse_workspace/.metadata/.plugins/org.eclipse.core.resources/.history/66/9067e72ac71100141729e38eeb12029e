#include "PheromoneWaypoint.h"

/* Perform exponential decay on "weight" at a rate of "decayRate" over
 * a period of simulation frames equivalent to the "time" variable. */
Real PheromoneWaypoint::exponentialDecay(Real time) {
	return (this->weight * exp(-this->decayRate * time));
}

PheromoneWaypoint::PheromoneWaypoint(CVector2 location, size_t time, Real decayRate, Real weight) {
	this->location = location;
	this->lastUpdate = time;
	this->decayRate = decayRate;
	this->weight = weight;
}

bool PheromoneWaypoint::update(size_t time) {
	this->weight = exponentialDecay(time - this->lastUpdate);
	this->lastUpdate = time;

	return (this->weight < 0.001) ? (false) : (true);
}

CVector2 PheromoneWaypoint::getLocation() {
	return this->location;
}
